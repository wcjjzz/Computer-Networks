## 1.1 信息时代中的网络

- 3大网络：电信网络（电话、传真、电报），有线电视网络，计算机网络
- 3网融合的技术实现
	- 传输载体：双绞线、同轴电缆——光纤+无线电波【扩大传输距离、提高传输质量】
	- 数字编码：将语音、图像、及更多的数据统一编码，并进行统一的传输

---
## 1.2 互联网概述

### 1.2.1名称解析
- 网络：若干结点（node）、连接结点的链路（link）组成
- 互连网（network of network）：由路由器，将多个小网络连接成一个大网络
- 互联网（Internet）：专有名词，起源于美国，逐渐发展成当下覆盖范围最大的网络
<img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250225145958.png">

- 信道、接口、链路
	- **信道**：路由器使用2.4GHz频段的信道6传输Wi-Fi信号。
	- **接口**：电脑通过RJ45网口连接路由器，手机通过无线网卡接入。
	- **链路**：电脑到路由器的网线是物理链路；手机通过无线链路（信道6）连接路由器。

| **概念** | **核心作用**  | **类型**      | **实例**        |
| ------ | --------- | ----------- | ------------- |
| 信道     | 数据传输的通道   | 物理/逻辑信道     | Wi-Fi信道6、光纤波长 |
| 接口     | 设备接入网络的端口 | 硬件/软件接口     | RJ45网口、无线网卡   |
| 链路     | 两点间的直接连接  | 物理/逻辑链路     | 光纤、VPN隧道      |
### 1.2.2互联网结构的3个阶段

- 第一阶段
	- 仅连接美国几所高校
	- 只有一层
	- 提出TCP/IP协议
- 第二阶段
	- 未普及民用
	  <img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250225164838.png">
- 第三阶段
	- 普及民用
	- 出现多级ISP（网络服务提供商）
	  <img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250225165201.png">


### 1.2.3万维网技术

- ​**统一资源标识符（URL/URI）​**：为互联网上的资源提供唯一标识，解决了信息定位问题
- ​**超文本传输协议（HTTP）​**：
	- HTTP协议通过请求-响应模型统一了数据传输标准
	  【提升了客户端、服务器端之间的传输速度】
- ​**超文本标记语言（HTML）​**：
	- `<a>`标签配合url属性，可以创建超链接，指向不同服务器的文档
	  【点击链接即可跨服务器获取信息，无需记忆复杂的IP地址】
	- 各种标签配合 CSS（层叠样式表）
	  【可以实现复杂的页面布局效果】
	- `<audio>`和`<video>`标签分别用于嵌入音频和视频文件
	  【网页能够展示更加丰富多样的内容】


### 1.2.4互联网的标准化

- RFC 文档（Request for Comments）：互联网标准的发表形式

- 标准化工作流程
	- 互联网草案（Internet Draft）：新想法，==不是==RFC文档
	- 建议标准（Proposed Standard）：已经过初步实验，==提升为==RFC文档
	- 互联网标准（Internet Standard）：经过充分的实践验证，互联网行业必须遵循的准则


---
## 1.3 互联网的组成部分

- 互联网 = 边缘部分、核心部分
- **边缘部分**：终端设备、接入网络，==负责生成和消费数据==
	- **接入网络**【连接终端设备、核心网络的设备】
		- 家庭场景：家庭路由器
		- ​企业场景：企业局域网中的交换机、防火墙
		- 与终端设备连接：通过无线电波、双绞线、数据线
		- 与核心网络连接：通过光纤
- **核心部分**：高速路由器、光纤链路（如ISP之间的互联），==负责远距离数据传输==
	- 路由器分多层（接入层、汇聚层、核心层），根据实时网络状态，选择同层、跨层路由
<img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250304083618.png">

### 1.3.1边缘部分的数据交换
- 2个端系统间【2个==应用进程==】的通信方式（通信架构）
	- 客户-服务器方式（Client-Server，C/S）
	- 对等方式（Peer to Peer，P2P）

#### C/S方式
- **客户程序**：
	- 被用户运行后，向所需服务对应的服务器发起请求（知道服务器IP）
- **服务器程序**：
	- 系统启动后一直运行，等待来自各地客户的请求（无需知道客户IP）

- **优点**：
	1. **中心化**：数据和服务集中在服务器端，易于维护、备份和权限控制【企业级应用】
	2. **安全性高**：通过服务器统一验证客户端身份，减少数据泄露风险【电子邮件、在线支付】
	3. **服务稳定**：服务器端经过优化，可处理高并发请求【在线游戏、金融交易】
	4. **成本高**：客户端只需处理交互逻辑，计算和存储压力由服务器承担
- **缺点**：
	1. **扩展困难**：流量激增时服务器可能成为性能瓶颈，扩展需额外成本大。
	2. **单点故障**：服务器宕机会导致整个系统瘫痪，通过硬件、数据、网络冗余保障可用。
	3. **依赖网络**：客户端需持续连接服务器，网络中断时服务不可用。


#### P2P方式
- 每一台主机，既可以是请求服务端，也可以是提供服务端

- **优点**：
	1. **去中心化**：无单点故障，节点间直接通信，系统容错性高。
	2. **高扩展性**：节点越多，资源（带宽、存储）越丰富，支持横向扩展【BitTorrent、迅雷】
	3. **成本低**：无需昂贵服务器，利用终端设备的闲置资源。
	4. **抗审查性强**：数据分散存储，难以被完全封锁或删除。
- **缺点**：
	1. **管理困难**：节点行为不可控，易出现恶意节点或数据不一致问题。
	2. **安全性风险**：数据分散存储可能导致隐私泄露（如文件共享中的版权问题）。
	3. **依赖节点稳定性**：节点随时加入或退出，影响服务连续性（如下载中断）。
	4. **复杂路由逻辑**：需高效算法（如DHT）协调节点通信，开发难度高。

|           | **C/S模式**   | **P2P模式**   |
| --------- | ----------- | ----------- |
| **架构复杂度** | 简单（分层明确）    | 复杂（需协调节点）   |
| **数据管控性** | 集中存储、强管控分发  | 分散存储、弱验证分发  |
| **服务可靠性** | 依赖服务器冗余     | 依赖节点分布      |
| **扩展性**   | 垂直扩展（升级服务器） | 水平扩展（动态增节点） |
| **成本**    | 高（服务器维护）    | 低（利用终端资源）   |

#### P2P应用例子
- 百度网盘的“优化传输速率”实现**共享带宽**
	- **原理**：使用P2P模式下载文件时，系统会从多个节点（包括其他用户设备）同时获取数据片段，整合后的下载速度可能超过单一节点提供的带宽上限
	- **流程**：百度网盘的“优化传输速率”功能开启后，会将用户设备的**空闲上传带宽**用于构建一个“传输通道”。其他用户下载同一文件时，系统会优先从离他们更近的节点（包括你的设备）获取数据片段，减少对中心服务器的依赖
	- ​**你的设备角色**：当你的网盘客户端处于开启状态时，可能作为临时节点为他人提供热门资源的上传，同时你下载时也能从其他节点获取资源

- 基于P2P架构的区块链技术实现**价值交换能力**
	- **问题**：传统P2P网络（如文件共享）缺乏信任机制，难以支撑涉及价值交换的场景。
	- **解决**：在P2P的基础上，区块链技术通过密码学技术、共识算法和智能合约，实现信任
		- **数字签名与身份验证**：为节点生成唯一身份标识（如公钥地址），确保交易发起者身份可验证且不可抵赖
		- **哈希算法与链式结构**：为文件生成不可篡改的哈希指纹
		- **共识机制**：所有节点需遵守一套规则来验证交易，交易记录被广播到全网所有节点，并在所有节点保持一致

---
### 1.3.2核心部分的数据交换
####  电路交换
- 问题：原始的电话信号是2部电话之间一条电线直连的。N部电话，需要 N(N-1 )/2 条电线
- 解决：
	- 条件：一块物理区域内的用户，很少同时打电话
	- 设置**交换机**【==只负责转接==】：源电话申请到目标电话之间的全部线路、交换机，等待目标电话接受，然后占用资源，一方挂电话后，释放资源
		- 建立连接（申请通信资源）
		- 通话（一直占用通信资源）
		- 释放连接（归还通信资源） 
- **特点**：在通话的全部时间内， 通话的两个用户始终==整段占用 端到端的传输线路==

<img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250304232245.png">
<img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250304232255.png">

#### 报文交换
- 问题：电报数据交换是瞬时的、异步的，不像电话持续的、同步的
- 解决：采用存储转发的方案，==逐段占用 通信链路==


#### 分组交换
- 问题：计算机数据交换也是瞬时的、异步的，但中间节点存储完整报文容易引发阻塞
- 解决：
	- 将**报文message**切分成**分组**
		- 每一个分组独立地选择最合适的转发路由
	- 设置**路由器**【==暂时存储、再转发==】
		- 不先建立连接就能单方面向其他主机发送分组
		- 在分组传输的过程中动态分配传输带宽，==逐段占用 通信链路==
<img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250305131532.png">

- **3种交换的对比**
<img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250305155239.png">

---
#### 分组路由的细节
- 报文message被分成多个数据段，在每个数据段开头添加**首部**（控制信息），形成多个独立转发的分组package
<img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250305131821.png">

- **首部**组成
	- **目的地址**：标识分组的最终接收者。
	- **源地址**：标识分组的发送者。
	- **端口号**：用于区分不同应用程序服务（传输层信息）。
	- **校验和**：用于检测数据在传输过程中是否出错。
	- **生存时间（TTL）**：防止分组在网络中无限循环。

- **转发表**
	- 定义：路由器内部维护的一张表，每个条目包括目的网络、下一跳、出接口
		- **目的网络**：==根据协议、实时网络拓扑，路由器可达的网络==
		  【IP范围】
		- **下一跳**：通向目的网络的最优下一跳
		  【最优路径的下一个路由器的IP】
		- **出接口**：路由器将数据转发出去使用的物理接口
		  【当路由器的某个接口配置的IP，与目标主机在同一个局域网下时，无需跳到下一个路由器，而是到达链路层，显示Direct】

- **多级路由的流程**
	- 假设一个分组从源地址 `192.168.1.2` 到目的地址 `172.16.1.5`，经过三级路由器（R1、R2、R3）的转发
	- 转发表如下：
	  <img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250305154556.png">
	- 源主机：检查目的地址是否在同一子网（`192.168.1.0/24`）。发现不在同一子网后，将分组发送给默认网关 `192.168.1.1`（即R1的eth0接口）
	- R1：检查与目的地址最匹配的目的网络，并将分组从对应的eth1接口发送到下一跳 `10.0.0.2`
	- R2：检查与目的地址最匹配的目的网络，并将分组从对应的eth1接口发送到下一跳 `203.0.113.2`
	- R3：检查匹配的下一跳，通过eth1接口直接发送分组到目的主机 `172.16.1.5`

---
## 1.4 计算机网络在我国的发展

## 1.5 计算机网络的类别

- 按地理范围分
	- 广域网WAN，Wide Area Network
	- 城域网MAN，Metropolitan Area Network
	- 局域网LAN，Local Area Network
	  【校园网、企业网】
	- 个人域网PAN，Personal Area Network
	  【开手机热点连电脑】

- 按逻辑功能分
	- 通信子网
	- 资源子网

- 按使用者分
	- 公有网
	- 专用网

---
## 1.6 互联网的组成部分
### 1.6.1 计算机网络的性能指标
#### 1.传输速率、数据率、比特率
- 定义：单位时间内，通过某个网络、信道、接口的数据量
- 单位：
	- bps，bit per second
	- kbps、Mbps、Gbps等等

- ==注意==：
	- 存储领域：以 **2的幂次**为单位
	- 通信领域：以 **10的幂次**为单位【网络协议设计需与物理层信号速率（如时钟频率）匹配】
	- 存储中，1MB = $10^{6}$B = 8*$10^{6}$b

| 单位          | 通信        | 存储       |
| ----------- | --------- | -------- |
| k (kilo)，千  | $10^{3}$  | $2^{10}$ |
| M (Mega)，兆  | $10^{6}$  | $2^{20}$ |
| G (Giga)，吉  | $10^{9}$  | $2^{30}$ |
| T(Tera)，太   | $10^{12}$ | $2^{40}$ |
| P (Peta)，拍  | $10^{15}$ | $2^{50}$ |
| E (Exa)，艾   | $10^{18}$ | $2^{60}$ |
| Z (Zetta)，泽 | $10^{21}$ | $2^{70}$ |
| Y (Yotta)，尧 | $10^{24}$ | $2^{80}$ |

---
#### 2.带宽
- 定义：
	- 物理信号领域：某个信号占据的频带的宽度（频域称谓）
	  【如，在传统的通信线路上传送的 电话信号 的标准带宽是3 .1kHz 千赫
	  （ 从 300 Hz 到 3 .4 kHz）】
	- 网络通信领域：单位时间内，通过某个网络、信道、 接口的**最大数据量**（时域称谓）
	  【最大数据率】

#### 3.吞吐量
- 定义：单位时间内，某网络中所有设备的接收、发出的数**实际据量**之和
 
- ==注意==
	- 主机 A 接入到互联网 的 链路速率是 100Mbit/s
	  【指的是A接入网络传输的额定速率】
	- 用户向运营商交了速率 为 100 Mbit/s 的 宽带接入费用
	  【仅保障了**本地网络到运营商网络接入点**的传输速率为100 Mbit/s，后续的传输速率（如访问外部服务器）不再由本地运营商完全控制】

---
#### 4.时延
- 定义：数据从一个网络设备传输到另一个网络设备，所需的时间
	- **发送/传输时延**：在源主机、交换设备发送器中，从发送数据帧的第一个bit，到该帧的最后一个bit发送完毕，所需的时间
		- 发送速率 = 数据率
		  <img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250304150953.png">
	- **传播时延**：在信道（如，铜线电缆、光纤）中，电磁波传播一定距离，所需的时间
		- ==传播速率取决于信道材料==
		- 铜线电缆比光纤传播速率大
		  <img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250304151326.png">
	- **处理时延**：在网络设备中，收到数据后，分析首部、提取数据、检验差错，所需的时间
	- **排队时延**：在路由器中，在输入队列中等待、解析转发接口、在输出队列中等待，所需的时间
<img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250304152323.png">
<img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250304152840.png">

---
#### 5.时延带宽积
- 定义：当发送端（以最大数据率）持续发送数据，从发送端发出但尚未到达接收端的数据量
- ==注意==：这里以时间作为单位来表示链路长度
<img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250304161703.png">
  
---
#### 6.往返时间RTT
- **Round Trip Time**
- 定义：发送方，从发送数据，到知道数据被对方成功接收，所需的时间

---
#### 7.利用率
- 定义：
	- 信道利用率 = 实际吞吐量 / 信道带宽
	- 网络利用率：全网络的信道利用率的加权平均值

- 若令 $D_{0}$ 表示网络空闲时的时延，D 表示网络当前的时延，U 是网络的利用率
  <img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250304162415.png">
- 利用率、时延的关系：随着利用率增大，时延急剧增大
  【运营商一般会控制利用率<50%】

---
### 1.6.2计算机网络的非性能特征
- 费用
- 质量
- 标准化
- 可靠性
- 可扩展性
- 易于管理、维护


---
## 1.7计算机网络体系结构
### 体系结构的形成历史

- 体系结构 = 各层协议的集合
- **OSI**（open system interconnection reference model，开放系统互连参考模型）
	- 由 ISO 指定
	- 冗余不实用
- **TCP/IP**
	- 简单，但不完整
	  【存在应用层协议之间调用链路层的情况】
	- 商业化成功，成为实际标准
- **五层协议**：最简单且完整，教学用
<img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250312171231.png">

---
### 数据在各层传递的相关概念
<img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250312171455.png">

- **注意**：==层数是从下往上数的==
- **实体**：任何参与信息传输的硬件、软件进程
- **协议**：
	- 控制同一层（对等层）的实体通信的集合
	- 协议的实现使得本层实体能够为上层实体提供**服务**
	- 本层实体对协议的实现基于下层实体提供的**服务**
- **协议数据单元**（PDU）：
	- 对等层之间传输数据的单位
	- 应用层：**报文（Message）**【原始的文字、语言、图像】
	- 传输层：**数据段（Segment）**（TCP） 、或 **用户数据报（Datagram）**（UDP）
	- 网络层：**数据包/分组（Packet）**
	- 数据链路层：**帧（Frame）**
	- 物理层：**比特流（Bit）**
- **协议控制信息**（PCI）：下层协议添加到 SDU 中的控制信息，用于实现本层协议功能


- **服务数据单元**（SDU）
	- 上层传递给下层的传输数据的单位
	- SDU + PCI = PDU
- **服务原语**：上下两层实体的交互信息
- **服务访问点（SAP，service access point）**：上下两层实体传输交互信息的逻辑接口
<img src="https://raw.githubusercontent.com/wcjjzz/Computer-Networks/main/attachments/Pasted%20image%2020250312172337.png">